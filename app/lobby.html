<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width">
    <title>Snake Online!</title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect();
      socket.on('new connection', function (data) {
        var clients = data.total_client_count;
        listLobby(data.currentGames);
        document.getElementById("status").innerHTML = "Total clients connected: " + clients;
      });
      function listLobby(currentGames) {
        console.log(currentGames);
        for (i in currentGames) {
          document.getElementById("lobby").innerHTML += gameDiv(currentGames[i]);
        };
      }
      function gameDiv(game) {
        return '<div class="game">'
          + game.room + ': ' + game.playerCount
          + '</div>';
      }
    </script>
    <script src="/createRoom.js"></script>
  </head>
  <body>
    <h1>484 Snakes!</h1>
    <p>Lobby Page</p>
    <div id="status"></div>
    <div id="lobby"></div>
    <form onsubmit="return createRoom(room.value);" action="/g">
      Create Room:
      <input id="room" type="text">
      <input type="submit">
    </form>
  </body>
</
html>
